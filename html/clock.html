<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Sprite3D.js clock</title>
		<style>
html,body{height: 100%}

body {
	background-color: rgb(100,100,100);
	color: white;
	margin: 0px;
	padding: 0px;
	overflow: hidden;
}

.box{
	background-color: rgba(24,79,211,.1);
}
	</style>
	<script src="../js/lib/Sprite3D.js" type="text/javascript"></script>
	<script src="../js/lib/RequestAnimationFrame.js" type="text/javascript"></script>
	<script type="text/javascript">

var stage,container,t=0;

function init(){
	//create root container 
	stage = Sprite3D.createCenteredContainer();

	//create object container
	container = new Sprite3D().setZ(-00).rotateX(-00).update();
	stage.addChild( container );

	var canvas = document.createElement('canvas');

	canvas.width = window.innerWidth * .2 ;//500;
	canvas.height = window.innerHeight * .5;//500;
	container.addChild(
		new Sprite3D(canvas)
			.setClassName("box")
			.setPosition( 0, 0, 0)
			.setProperty( 'context', canvas.getContext('2d') )
			.setRotateFirst( false )
			.setRegistrationPoint(window.innerWidth * .1 , window.innerHeight * .25 , 0)
			.update()
	);
	var canvas2 = document.createElement('canvas'); 
	container.addChild(
		new Sprite3D(canvas2)
			.setClassName("box")
			.setPosition(100,0,0)
			.setProperty( 'context', canvas2.getContext('2d') )
			.setRotateFirst( false )
			.update()
	);

	animate();

	//setInterval( move, 1000/40 );
}

function animate(){
	requestAnimationFrame( animate );
	update();
}

function update(){
//	container.children[0].context.clearRect( 0, 0, container.children[0].domElement.width , container.children[0].domElement.height );
	plane_draw( container.children[0].context , container.children[0].domElement.width , container.children[0].domElement.height );
	draw( container.children[1].context , container.children[1].domElement.width , container.children[1].domElement.height );
	container.rotateY(1).update();
}

function plane_draw( ctx, width ,height){
	ctx.fillStyle = "black";
	ctx.fillRect( 0, 0, width, height );
}

function draw( ctx, width, height ){
	var v;
	
	//ctx.clearRect( 0, 0, width, height );
	ctx.fillStyle = "rgb(0,255,255)";
	ctx.strokeStyle = "rgb(0,0,255)";
	ctx.fillRect( width/3 , height /3 , width * 2 / 3 , height * 2 / 3);
}

function move(){
	t += .05;

	container
		//.rotateY(-3)
		//.setRotationX(Math.cos(t) * 15 - 20)
		//.setRotationX(t*10)
		.setRotationZ(t*100)
		//.rotateZ(t)
		.update();
	
}
	</script>
	</head>
		<body onload="init();">
	</body>
</html>
